<<<<<<< HEAD
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>海工装备知识问答系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom styles that can't be easily done with Tailwind */
        .gradient-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
        }
        .typewriter {
            overflow: hidden;
            border-right: .15em solid #3b82f6;
            white-space: nowrap;
            margin: 0 auto;
            letter-spacing: .15em;
            animation: typing 3.5s steps(40, end), blink-caret .75s step-end infinite;
        }
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #3b82f6; }
        }
        .chat-bubble {
            border-radius: 20px 20px 20px 0;
        }
        .user-bubble {
            border-radius: 20px 20px 0 20px;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #374151;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-6 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i class="fas fa-anchor text-3xl text-blue-300"></i>
                <h1 class="text-2xl md:text-3xl font-bold">海工装备知识问答系统</h1>
            </div>
            <nav>
                <ul class="flex space-x-6">
                    <li><a href="new_web.html" class="hover:text-blue-200 transition"><i class="fas fa-home mr-1"></i>首页</a></li>
                    <li><a href="knowledge.html" class="hover:text-blue-200 transition"><i class="fas fa-book mr-1"></i>知识库</a></li>
                    <li><a href="help.html" class="hover:text-blue-200 transition"><i class="fas fa-question-circle mr-1"></i>帮助</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8 flex flex-col items-center">
        <!-- Hero Section -->
        <section class="w-full max-w-4xl text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">专业海工装备知识问答平台</h2>
            <p class="text-lg text-gray-600 mb-6">获取关于海洋工程装备的设计、制造、运维等专业问题的解答</p>
            
            <!-- Search Box -->
            <div class="relative w-full max-w-2xl mx-auto">
                <input type="text" id="searchQuery" placeholder="输入您的问题，例如：FPSO的主要系统包括哪些？" 
                       class="w-full px-6 py-4 rounded-full border border-gray-300 shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                <button id="searchBtn" class="absolute right-2 top-2 bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition transform hover:scale-105 pulse">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            <p class="text-sm text-gray-500 mt-2">试试这些问题：<span class="text-blue-600 cursor-pointer hover:underline" onclick="setExampleQuestion(0)">导管架平台的安装过程</span>, <span class="text-blue-600 cursor-pointer hover:underline" onclick="setExampleQuestion(1)">深水钻井船的特点</span>, <span class="text-blue-600 cursor-pointer hover:underline" onclick="setExampleQuestion(2)">海洋风电安装船的关键参数</span></p>
        </section>

        <!-- Features -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12 w-full max-w-6xl">
            <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition flex flex-col items-center text-center">
                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-cogs text-blue-600 text-2xl"></i>
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">专业技术解答</h3>
                <p class="text-gray-600">由海工领域专家提供准确可靠的解答</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition flex flex-col items-center text-center">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-book-open text-green-600 text-2xl"></i>
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">全面知识库</h3>
                <p class="text-gray-600">涵盖各类海工装备的设计、建造和运维知识</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition flex flex-col items-center text-center">
                <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-bolt text-purple-600 text-2xl"></i>
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">快速响应</h3>
                <p class="text-gray-600">实时获取专业工程师的解答</p>
            </div>
        </div>

        <!-- Chat Interface -->
        <div id="chatContainer" class="hidden w-full max-w-4xl bg-white rounded-xl shadow-lg p-6 mb-8">
            <div class="flex justify-between items-center border-b pb-4 mb-4">
                <h3 class="text-xl font-semibold text-gray-800"><i class="fas fa-comments mr-2 text-blue-500"></i>问答对话</h3>
                <button id="clearChat" class="text-sm text-red-500 hover:text-red-700"><i class="fas fa-trash-alt mr-1"></i>清空对话</button>
            </div>
            
            <div id="chatWindow" class="h-96 overflow-y-auto mb-4 space-y-4 pr-2">
                <!-- Chat bubbles will be inserted here -->
                <div id="welcomeMessage" class="bg-blue-50 text-gray-800 p-4 rounded-lg max-w-md">
                    <div class="font-semibold text-blue-700 mb-2"><i class="fas fa-robot mr-2"></i>海工装备助手</div>
                    <div class="typewriter">您好！我是海工装备知识问答助手，可以解答关于海洋工程装备的相关问题。请随时提问！</div>
                </div>
            </div>
            
            <div class="flex items-center">
                <input type="text" id="chatInput" placeholder="输入您的问题..." class="flex-grow px-4 py-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <button id="sendBtn" class="bg-blue-600 text-white px-6 py-3 rounded-r-lg hover:bg-blue-700 transition">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
            <div class="flex justify-start space-x-2 mt-2">
                <button class="text-xs bg-gray-100 text-gray-700 px-3 py-1 rounded-full hover:bg-gray-200 transition">FPSO系统</button>
                <button class="text-xs bg-gray-100 text-gray-700 px-3 py-1 rounded-full hover:bg-gray-200 transition">钻井平台</button>
                <button class="text-xs bg-gray-100 text-gray-700 px-3 py-1 rounded-full hover:bg-gray-200 transition">水下设备</button>
                <button class="text-xs bg-gray-100 text-gray-700 px-3 py-1 rounded-full hover:bg-gray-200 transition">安装船</button>
            </div>
        </div>

        <!-- Knowledge Categories -->
        <section class="w-full max-w-6xl">
            <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">专业知识分类</h3>
            <!-- 分类跳转示例 -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <a href="fpsosys.html" class="bg-blue-100 hover:bg-blue-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-ship text-blue-700 text-2xl mr-3"></i>
                    <span>浮式生产系统</span>
                </a>
                <a href="subsea.html" class="bg-green-100 hover:bg-green-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-water text-green-700 text-2xl mr-3"></i>
                    <span>水下生产系统</span>
                </a>
                <a href="structure.html" class="bg-yellow-100 hover:bg-yellow-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-puzzle-piece text-yellow-700 text-2xl mr-3"></i>
                    <span>海洋结构物</span>
                </a>
                <a href="wind.html" class="bg-red-100 hover:bg-red-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-wind text-red-700 text-2xl mr-3"></i>
                    <span>海上风电</span>
                </a>
                <div class="bg-purple-100 hover:bg-purple-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-hard-hat text-purple-700 text-2xl mr-3"></i>
                    <span>安装工程</span>
                </div>
                <div class="bg-indigo-100 hover:bg-indigo-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-tools text-indigo-700 text-2xl mr-3"></i>
                    <span>维修检测</span>
                </div>
                <div class="bg-pink-100 hover:bg-pink-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-flask text-pink-700 text-2xl mr-3"></i>
                    <span>材料技术</span>
                </div>
                <div class="bg-teal-100 hover:bg-teal-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-laptop-code text-teal-700 text-2xl mr-3"></i>
                    <span>数字化技术</span>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h4 class="text-lg font-semibold mb-4">海工装备知识问答系统</h4>
                    <p class="text-gray-400">为海洋工程行业提供专业的知识问答服务</p>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">资源</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">技术文档</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">行业标准</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">案例分析</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">支持</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">帮助中心</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">联系我们</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">反馈建议</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">关注我们</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition text-xl"><i class="fab fa-weixin tooltip"><span class="tooltip-text">微信公众号</span></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition text-xl"><i class="fab fa-linkedin tooltip"><span class="tooltip-text">LinkedIn</span></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition text-xl"><i class="fas fa-envelope tooltip"><span class="tooltip-text">电子邮箱</span></i></a>
                    </div>
                    <p class="text-sm text-gray-400 mt-4">© 2023 海工装备知识问答系统</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Sample knowledge base
        const knowledgeBase = {
            "FPSO的主要系统包括哪些": "FPSO(浮式生产储卸油装置)的主要系统包括:1.船体系统 2.上部模块(生产工艺系统、公用系统) 3.系泊系统 4.转塔系统 5.原油存储和卸载系统 6.动力系统 7.自动化控制系统 8.安全系统等。具体配置根据油田特性和设计要求会有所不同。",
            "导管架平台的安装过程": "导管架平台的安装主要包括以下步骤:1.海底准备(平整、挖沟) 2.导管架运输(湿拖或干拖) 3.导管架下水 4.就位调整 5.打桩 6.灌浆连接 7.上部组块安装 8.检查验收。整个过程需要精确的海况控制和专业安装船舶参与。",
            "深水钻井船的特点": "深水钻井船的主要特点包括:1.动力定位系统(DP3级) 2.大钻探能力(3000米+) 3.大载荷甲板 4.月池设计 5.自动钻台 6.先进的隔水管系统 7.大型Living Quarter 8.较强的自持能力 9.双钻塔(部分新型设计)等。",
            "海洋风电安装船的关键参数": "海洋风电安装船的关键参数包括:1.甲板面积和载荷 2.起重机能力和高度 3.桩腿长度和稳定性 4.吃水深度 5.动力定位能力 6.自航速度 7.作业水深范围 8.锚泊系统 9.直升机甲板 10.居住舱室容量等。",
            "水下生产系统的组成": "水下生产系统主要包括:1.水下采油树 2.管汇和基盘 3.水下控制系统 4.跨接管 5.脐带缆 6.保护结构 7.连接器 8.回收工具等。根据开发方式可分为湿式、干式和复合式水下生产系统。"
        };

        // Example questions for quick input
        const exampleQuestions = [
            "导管架平台的安装过程",
            "深水钻井船的特点",
            "海洋风电安装船的关键参数"
        ];

        // DOM elements
        const searchQuery = document.getElementById('searchQuery');
        const searchBtn = document.getElementById('searchBtn');
        const chatContainer = document.getElementById('chatContainer');
        const chatWindow = document.getElementById('chatWindow');
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');
        const clearChat = document.getElementById('clearChat');

        // Initialize the chat interface when search is performed
        function initChat(query) {
            chatContainer.classList.remove('hidden');
            
            // Remove welcome message after first query
            const welcomeMsg = document.getElementById('welcomeMessage');
            if (welcomeMsg) {
                setTimeout(() => {
                    welcomeMsg.remove();
                }, 1000);
            }
            
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        // Add a message to the chat window
        function addMessage(sender, message, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex ${isUser ? 'justify-end' : 'justify-start'}`;
            
            const bubbleClass = isUser ? 'bg-blue-600 text-white user-bubble' : 'bg-gray-100 text-gray-800 chat-bubble';
            
            messageDiv.innerHTML = `
                <div class="max-w-xs md:max-w-md lg:max-w-lg p-4 ${bubbleClass}">
                    <div class="font-semibold ${isUser ? 'text-blue-100' : 'text-blue-700'} mb-1">
                        ${isUser ? '<i class="fas fa-user mr-2"></i>您' : '<i class="fas fa-robot mr-2"></i>海工装备助手'}
                    </div>
                    <div>${message}</div>
                </div>
            `;
            
            chatWindow.appendChild(messageDiv);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        // Get answer from knowledge base
        async function getAnswer(question) {
            try {
                const resp = await fetch('http://localhost:5000/ask', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({question})
                });
                const data = await resp.json();
                return data.answer || "抱歉，模型没有返回答案。";
            } catch (e) {
                return "后端服务连接失败，请检查API服务是否启动。";
            }
        }

        // Set example question
        function setExampleQuestion(index) {
            if (index >= 0 && index < exampleQuestions.length) {
                const question = exampleQuestions[index];
                searchQuery.value = question;
            }
        }

        // Event listeners
        searchBtn.addEventListener('click', async function() {
            const query = searchQuery.value.trim();
            if (query) {
                initChat(query);
                addMessage('user', query, true);
                const answer = await getAnswer(query);
                addMessage('bot', answer);
            }
        });

        searchQuery.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchBtn.click();
            }
        });

        sendBtn.addEventListener('click', async function() {
            const query = chatInput.value.trim();
            if (query) {
                addMessage('user', query, true);
                chatInput.value = '';
                const answer = await getAnswer(query);
                addMessage('bot', answer);
            }
        });

        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendBtn.click();
            }
        });

        clearChat.addEventListener('click', function() {
            chatWindow.innerHTML = '';
        });
    </script>
</body>
=======
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>海工装备知识问答系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom styles that can't be easily done with Tailwind */
        .gradient-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
        }
        .typewriter {
            overflow: hidden;
            border-right: .15em solid #3b82f6;
            white-space: nowrap;
            margin: 0 auto;
            letter-spacing: .15em;
            animation: typing 3.5s steps(40, end), blink-caret .75s step-end infinite;
        }
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #3b82f6; }
        }
        .chat-bubble {
            border-radius: 20px 20px 20px 0;
        }
        .user-bubble {
            border-radius: 20px 20px 0 20px;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #374151;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-6 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i class="fas fa-anchor text-3xl text-blue-300"></i>
                <h1 class="text-2xl md:text-3xl font-bold">海工装备知识问答系统</h1>
            </div>
            <nav>
                <ul class="flex space-x-6">
                    <li><a href="new_web.html" class="hover:text-blue-200 transition"><i class="fas fa-home mr-1"></i>首页</a></li>
                    <li><a href="knowledge.html" class="hover:text-blue-200 transition"><i class="fas fa-book mr-1"></i>知识库</a></li>
                    <li><a href="help.html" class="hover:text-blue-200 transition"><i class="fas fa-question-circle mr-1"></i>帮助</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8 flex flex-col items-center">
        <!-- Hero Section -->
        <section class="w-full max-w-4xl text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">专业海工装备知识问答平台</h2>
            <p class="text-lg text-gray-600 mb-6">获取关于海洋工程装备的设计、制造、运维等专业问题的解答</p>
            
            <!-- Search Box -->
            <div class="relative w-full max-w-2xl mx-auto">
                <input type="text" id="searchQuery" placeholder="输入您的问题，例如：FPSO的主要系统包括哪些？" 
                       class="w-full px-6 py-4 rounded-full border border-gray-300 shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                <button id="searchBtn" class="absolute right-2 top-2 bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition transform hover:scale-105 pulse">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            <p class="text-sm text-gray-500 mt-2">试试这些问题：<span class="text-blue-600 cursor-pointer hover:underline" onclick="setExampleQuestion(0)">导管架平台的安装过程</span>, <span class="text-blue-600 cursor-pointer hover:underline" onclick="setExampleQuestion(1)">深水钻井船的特点</span>, <span class="text-blue-600 cursor-pointer hover:underline" onclick="setExampleQuestion(2)">海洋风电安装船的关键参数</span></p>
        </section>

        <!-- Features -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12 w-full max-w-6xl">
            <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition flex flex-col items-center text-center">
                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-cogs text-blue-600 text-2xl"></i>
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">专业技术解答</h3>
                <p class="text-gray-600">由海工领域专家提供准确可靠的解答</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition flex flex-col items-center text-center">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-book-open text-green-600 text-2xl"></i>
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">全面知识库</h3>
                <p class="text-gray-600">涵盖各类海工装备的设计、建造和运维知识</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition flex flex-col items-center text-center">
                <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-bolt text-purple-600 text-2xl"></i>
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">快速响应</h3>
                <p class="text-gray-600">实时获取专业工程师的解答</p>
            </div>
        </div>

        <!-- Chat Interface -->
        <div id="chatContainer" class="hidden w-full max-w-4xl bg-white rounded-xl shadow-lg p-6 mb-8">
            <div class="flex justify-between items-center border-b pb-4 mb-4">
                <h3 class="text-xl font-semibold text-gray-800"><i class="fas fa-comments mr-2 text-blue-500"></i>问答对话</h3>
                <button id="clearChat" class="text-sm text-red-500 hover:text-red-700"><i class="fas fa-trash-alt mr-1"></i>清空对话</button>
            </div>
            
            <div id="chatWindow" class="h-96 overflow-y-auto mb-4 space-y-4 pr-2">
                <!-- Chat bubbles will be inserted here -->
                <div id="welcomeMessage" class="bg-blue-50 text-gray-800 p-4 rounded-lg max-w-md">
                    <div class="font-semibold text-blue-700 mb-2"><i class="fas fa-robot mr-2"></i>海工装备助手</div>
                    <div class="typewriter">您好！我是海工装备知识问答助手，可以解答关于海洋工程装备的相关问题。请随时提问！</div>
                </div>
            </div>
            
            <div class="flex items-center">
                <input type="text" id="chatInput" placeholder="输入您的问题..." class="flex-grow px-4 py-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <button id="sendBtn" class="bg-blue-600 text-white px-6 py-3 rounded-r-lg hover:bg-blue-700 transition">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
            <div class="flex justify-start space-x-2 mt-2">
                <button class="text-xs bg-gray-100 text-gray-700 px-3 py-1 rounded-full hover:bg-gray-200 transition">FPSO系统</button>
                <button class="text-xs bg-gray-100 text-gray-700 px-3 py-1 rounded-full hover:bg-gray-200 transition">钻井平台</button>
                <button class="text-xs bg-gray-100 text-gray-700 px-3 py-1 rounded-full hover:bg-gray-200 transition">水下设备</button>
                <button class="text-xs bg-gray-100 text-gray-700 px-3 py-1 rounded-full hover:bg-gray-200 transition">安装船</button>
            </div>
        </div>

        <!-- Knowledge Categories -->
        <section class="w-full max-w-6xl">
            <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">专业知识分类</h3>
            <!-- 分类跳转示例 -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <a href="fpsosys.html" class="bg-blue-100 hover:bg-blue-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-ship text-blue-700 text-2xl mr-3"></i>
                    <span>浮式生产系统</span>
                </a>
                <a href="subsea.html" class="bg-green-100 hover:bg-green-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-water text-green-700 text-2xl mr-3"></i>
                    <span>水下生产系统</span>
                </a>
                <a href="structure.html" class="bg-yellow-100 hover:bg-yellow-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-puzzle-piece text-yellow-700 text-2xl mr-3"></i>
                    <span>海洋结构物</span>
                </a>
                <a href="wind.html" class="bg-red-100 hover:bg-red-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-wind text-red-700 text-2xl mr-3"></i>
                    <span>海上风电</span>
                </a>
                <div class="bg-purple-100 hover:bg-purple-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-hard-hat text-purple-700 text-2xl mr-3"></i>
                    <span>安装工程</span>
                </div>
                <div class="bg-indigo-100 hover:bg-indigo-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-tools text-indigo-700 text-2xl mr-3"></i>
                    <span>维修检测</span>
                </div>
                <div class="bg-pink-100 hover:bg-pink-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-flask text-pink-700 text-2xl mr-3"></i>
                    <span>材料技术</span>
                </div>
                <div class="bg-teal-100 hover:bg-teal-200 transition p-4 rounded-lg cursor-pointer flex items-center">
                    <i class="fas fa-laptop-code text-teal-700 text-2xl mr-3"></i>
                    <span>数字化技术</span>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h4 class="text-lg font-semibold mb-4">海工装备知识问答系统</h4>
                    <p class="text-gray-400">为海洋工程行业提供专业的知识问答服务</p>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">资源</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">技术文档</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">行业标准</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">案例分析</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">支持</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">帮助中心</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">联系我们</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">反馈建议</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">关注我们</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition text-xl"><i class="fab fa-weixin tooltip"><span class="tooltip-text">微信公众号</span></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition text-xl"><i class="fab fa-linkedin tooltip"><span class="tooltip-text">LinkedIn</span></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition text-xl"><i class="fas fa-envelope tooltip"><span class="tooltip-text">电子邮箱</span></i></a>
                    </div>
                    <p class="text-sm text-gray-400 mt-4">© 2023 海工装备知识问答系统</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Sample knowledge base
        const knowledgeBase = {
            "FPSO的主要系统包括哪些": "FPSO(浮式生产储卸油装置)的主要系统包括:1.船体系统 2.上部模块(生产工艺系统、公用系统) 3.系泊系统 4.转塔系统 5.原油存储和卸载系统 6.动力系统 7.自动化控制系统 8.安全系统等。具体配置根据油田特性和设计要求会有所不同。",
            "导管架平台的安装过程": "导管架平台的安装主要包括以下步骤:1.海底准备(平整、挖沟) 2.导管架运输(湿拖或干拖) 3.导管架下水 4.就位调整 5.打桩 6.灌浆连接 7.上部组块安装 8.检查验收。整个过程需要精确的海况控制和专业安装船舶参与。",
            "深水钻井船的特点": "深水钻井船的主要特点包括:1.动力定位系统(DP3级) 2.大钻探能力(3000米+) 3.大载荷甲板 4.月池设计 5.自动钻台 6.先进的隔水管系统 7.大型Living Quarter 8.较强的自持能力 9.双钻塔(部分新型设计)等。",
            "海洋风电安装船的关键参数": "海洋风电安装船的关键参数包括:1.甲板面积和载荷 2.起重机能力和高度 3.桩腿长度和稳定性 4.吃水深度 5.动力定位能力 6.自航速度 7.作业水深范围 8.锚泊系统 9.直升机甲板 10.居住舱室容量等。",
            "水下生产系统的组成": "水下生产系统主要包括:1.水下采油树 2.管汇和基盘 3.水下控制系统 4.跨接管 5.脐带缆 6.保护结构 7.连接器 8.回收工具等。根据开发方式可分为湿式、干式和复合式水下生产系统。"
        };

        // Example questions for quick input
        const exampleQuestions = [
            "导管架平台的安装过程",
            "深水钻井船的特点",
            "海洋风电安装船的关键参数"
        ];

        // DOM elements
        const searchQuery = document.getElementById('searchQuery');
        const searchBtn = document.getElementById('searchBtn');
        const chatContainer = document.getElementById('chatContainer');
        const chatWindow = document.getElementById('chatWindow');
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');
        const clearChat = document.getElementById('clearChat');

        // Initialize the chat interface when search is performed
        function initChat(query) {
            chatContainer.classList.remove('hidden');
            
            // Remove welcome message after first query
            const welcomeMsg = document.getElementById('welcomeMessage');
            if (welcomeMsg) {
                setTimeout(() => {
                    welcomeMsg.remove();
                }, 1000);
            }
            
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        // Add a message to the chat window
        function addMessage(sender, message, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex ${isUser ? 'justify-end' : 'justify-start'}`;
            
            const bubbleClass = isUser ? 'bg-blue-600 text-white user-bubble' : 'bg-gray-100 text-gray-800 chat-bubble';
            
            messageDiv.innerHTML = `
                <div class="max-w-xs md:max-w-md lg:max-w-lg p-4 ${bubbleClass}">
                    <div class="font-semibold ${isUser ? 'text-blue-100' : 'text-blue-700'} mb-1">
                        ${isUser ? '<i class="fas fa-user mr-2"></i>您' : '<i class="fas fa-robot mr-2"></i>海工装备助手'}
                    </div>
                    <div>${message}</div>
                </div>
            `;
            
            chatWindow.appendChild(messageDiv);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        // Get answer from knowledge base
        async function getAnswer(question) {
            try {
                const resp = await fetch('http://localhost:5000/ask', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({question})
                });
                const data = await resp.json();
                return data.answer || "抱歉，模型没有返回答案。";
            } catch (e) {
                return "后端服务连接失败，请检查API服务是否启动。";
            }
        }

        // Set example question
        function setExampleQuestion(index) {
            if (index >= 0 && index < exampleQuestions.length) {
                const question = exampleQuestions[index];
                searchQuery.value = question;
            }
        }

        // Event listeners
        searchBtn.addEventListener('click', async function() {
            const query = searchQuery.value.trim();
            if (query) {
                initChat(query);
                addMessage('user', query, true);
                const answer = await getAnswer(query);
                addMessage('bot', answer);
            }
        });

        searchQuery.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchBtn.click();
            }
        });

        sendBtn.addEventListener('click', async function() {
            const query = chatInput.value.trim();
            if (query) {
                addMessage('user', query, true);
                chatInput.value = '';
                const answer = await getAnswer(query);
                addMessage('bot', answer);
            }
        });

        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendBtn.click();
            }
        });

        clearChat.addEventListener('click', function() {
            chatWindow.innerHTML = '';
        });
    </script>
</body>
>>>>>>> 650ed3dc136021e66fe2bfb4ffb7e9e684915007
</html>